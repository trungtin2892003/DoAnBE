@{
    Layout = "~/Views/Shared/_Layout.cshtml"; // Sử dụng layout chung

    // Lấy danh sách danh mục và sản phẩm từ ViewData
    var categories = ViewData["Categories"] as List<Category> ?? new List<Category>();
    var products = ViewData["Products"] as List<Product> ?? new List<Product>();
}
<section>
<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="breadcrumb__text">
                    <h2>Shop</h2>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="breadcrumb__links">
                    <a href="/">Home</a>
                    <span>Shop</span>
                </div>
            </div>
        </div>
    </div>
</div>
</section>
<!-- Breadcrumb End -->
<!-- Shop Section Begin -->
<section class="shop spad">
    <div class="container">
        <div class="shop__option">
            <div class="row">
                <!-- Tìm kiếm và chọn danh mục -->
                <div class="col-lg-7 col-md-7">
                    <div class="shop__option__search">
                        <form method="get" action="/Product/Index">
                          
                            <input type="text" name="searchQuery" placeholder="Search for products"
                                   value="@Context.Request.Query["searchQuery"]" />
                            <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i> Search</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hiển thị danh sách sản phẩm -->
        <div class="row mt-4">
            @if (products.Any())
            {
                @foreach (var product in products)
                {
                    <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                    <a asp-controller="Product" asp-action="Details" asp-route-id="@product?.PRO_ID" class="text-dark">
                        <div class="product__item">
                            <div class="product__item__pic set-bg" data-setbg="/Data/product/@product.Avatar">
                                <div class="product__label">
                                    <span>@product.Name</span>
                                </div>
                            </div>
                            <div class="product__item__text">
                                    <div class="product__item__price">@string.Format("{0:0,0.000}", product.Price) VND</div>
                                        <form asp-controller="Cart" asp-action="AddToCart" method="post">
                                            <input type="hidden" name="productId" value="@product?.PRO_ID" />
                                            <input type="hidden" name="productName" value="@product?.Name" />
                                            <input type="hidden" name="productImage" value="@product?.Avatar" />
                                            <input type="hidden" name="price" value="@product?.Price" />
                                            <input type="hidden" name="productImage" value="/Data/product/@product?.Avatar" />
                                            <button type="submit" class="cart_add">Add to Cart</button>
                                        </form>
                            </div>
                        </div>
                        </a>
                    </div>
                }
            }
            else
            {
                <p class="text-center">No products found.</p>
            }
        </div>
    </div>
</section>
<!-- Shop Section End -->
