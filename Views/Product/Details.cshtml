@model ShopCake.Models.Product
@{
    ViewData["Title"] = "Chi tiet san pham";
}
<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="breadcrumb__text">
                    <h2>Product detail</h2>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="breadcrumb__links">
                    <a href="./index.html">Home</a>
                    <a href="./shop.html">Shop</a>
                    <span>Sweet autumn leaves</span>
                </div>
            </div>
        </div>
    </div>
</div>
<section class="product-details spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="product__details__img">
                    <div class="product__details__big__img">
                        <img class="big_img" src="~/Data/Product/@Model.Avatar" alt="">
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="product__details__text">
                    <div class="product__label">Cupcake</div>
                    <h4>@Model.Name</h4>
                    <h5>@string.Format("{0:0,0.000}", @Model.Price) VND</h5>
                    <p>
                        @Model.Intro
                    </p>
                    <ul>
                        <style>
                            .star-filled {
                                color: gold; /* Màu vàng cho ngôi sao đã đánh giá */
                            }

                            .star-empty {
                                color: lightgray; /* Màu xám nhạt cho ngôi sao chưa đánh giá */
                            }
                        </style>

                        <!-- Cập nhật mã HTML -->
                        <li>SKU: <span>17</span></li>

                        <!-- Hiển thị số sao đầy (đã đánh giá) -->
                        @for (int i = 0; i < Model.Rate; i++)
                        {
                            <i class="fa fa-star star-filled"></i>
                        }

                        <!-- Hiển thị số sao trống (chưa đánh giá) -->
                        @for (int i = 0; i < (5 - Model.Rate); i++)
                        {
                            <i class="fa fa-star star-empty"></i>
                        }

                        <li>Tags: <span>Gadgets, minimalisstic</span></li>

                    </ul>
                    <div class="product__details__option">
                        <form asp-controller="Cart" asp-action="AddToCart" method="post">
                            <input type="hidden" name="productId" value="@Model.PRO_ID" />
                            <input type="hidden" name="productName" value="@Model.Name" />
                            <input type="hidden" name="productImage" value="@Model.Avatar" />
                            <input type="hidden" name="price" value="@Model.Price" />
                            <button type="submit" class="primary-btn">Add to Cart</button>
                        </form>
                        <a href="#" class="heart__btn"><span class="icon_heart_alt"></span></a>
                    </div>

                </div>
            </div>
        </div>
        <div class="product__details__tab">
            <div class="col-lg-12">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <button class="nav-link active border-white border-bottom-0" type="button" role="tab"
                                id="nav-about-tab" data-bs-toggle="tab" data-bs-target="#nav-about"
                                aria-controls="nav-about" aria-selected="true">
                            Description
                        </button>
                    </li>
                  
                    <li class="nav-item">
                        <button class="nav-link border-white border-bottom-0" type="button" role="tab"
                                id="nav-mission-tab" data-bs-toggle="tab" data-bs-target="#nav-mission"
                                aria-controls="nav-mission" aria-selected="false">
                            Reviews
                        </button>
                    </li>
                </ul>
                
            </div>
        </div>
    </div>
</section>
<div class="col-lg-12"> 
    <div class="tab-content mb-5">
        <div class="tab-pane active" id="nav-about" role="tabpanel" aria-labelledby="nav-about-tab">
            <p class="text-dark">
                @Html.Raw(Model.Description)
            </p>
        </div>
        <div class="tab-pane" id="nav-mission" role="tabpanel" aria-labelledby="nav-mission-tab">
             @if (Model.Review != null && Model.Review.Any())
            {
                foreach (var review in Model.Review)
                {
                    <div class="review-item border p-3 mb-4 rounded">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <!-- Tên người dùng -->
                            <h5 class="text-dark mb-0">@($" {review.Member.LastName} {review.Member.FirstName}")</h5>

                            <!-- Ngày đánh giá -->
                            <p class="text-muted small mb-0">@review.ReviewDate.ToString("dd MMM yyyy")</p>
                        </div>
                        <!-- Số sao đánh giá -->
                        <div class="d-flex align-items-center mb-3">
                            @for (int i = 0; i < review.Rate; i++)
                            {
                                <i class="fa fa-star star-filled"></i>
                            }
                            @for (int i = 0; i < (5 - review.Rate); i++)
                            {
                                <i class="fa fa-star star-empty"></i>
                            }
                        </div>
                        <!-- Nội dung đánh giá -->
                        <p class="text-dark">@review.Content</p>
                    </div>

                }
            }
            else
            {
                <p>No reviews yet. Be the first to write one!</p>
            }
            <form asp-action="Create" asp-controller="Review" method="post" class="p-4 border rounded shadow-sm bg-light">
                <input type="hidden" name="PRO_ID" value="@Model.PRO_ID" />
                @if (Model.Review != null && Model.Review.FirstOrDefault()?.Member != null)
                {
                    <input type="hidden" name="MEM_ID" value="@Model.Review.FirstOrDefault().Member.MEM_ID" />
                }
                else
                {
                    <p>Không tìm thấy thông tin thành viên.</p>
                }

                <input type="hidden" name="Productname" value="@Model.Name" />

                <div class="mb-4">
                    <label class="form-label fw-bold">Rate this product:</label>
                    <div class="star-rating">
                        <input type="radio" id="star5" name="Rate" value="5" required />
                        <label for="star5">&#9733;</label>
                        <input type="radio" id="star4" name="Rate" value="4" />
                        <label for="star4">&#9733;</label>
                        <input type="radio" id="star3" name="Rate" value="3" />
                        <label for="star3">&#9733;</label>
                        <input type="radio" id="star2" name="Rate" value="2" />
                        <label for="star2">&#9733;</label>
                        <input type="radio" id="star1" name="Rate" value="1" />
                        <label for="star1">&#9733;</label>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="content" class="form-label fw-bold">Your Review:</label>
                    <textarea name="Content"
                              id="content"
                              class="form-control"
                              rows="4"
                              placeholder="Write your review here..."
                              required></textarea>
                </div>

                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-send"></i> Submit Review
                    </button>
                </div>
            </form>
        </div>
       
    </div>
</div>
<style>
    .star-rating {
        display: flex;
        flex-direction: row-reverse;
        justify-content: center;
        gap: 5px;
    }

        .star-rating input[type="radio"] {
            display: none;
        }

        .star-rating label {
            font-size: 2rem;
            color: #ccc;
            cursor: pointer;
            transition: color 0.3s ease;
        }

            .star-rating input[type="radio"]:checked ~ label,
            .star-rating label:hover,
            .star-rating label:hover ~ label {
                color: #f39c12; /* Màu vàng cho ngôi sao */
            }
</style>


<!-- Related Products Section Begin -->
<section class="related-products spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="section-title">
                    <h2>Related Products</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="related__products__slider owl-carousel">
            @if (ViewData["RelatedProducts"] is List<Product> relatedProducts)
            {
                foreach (var product in relatedProducts)
                {
                    <div class="col-lg-3">
                        <div class="product__item">
                            <div class="product__item__pic set-bg" data-setbg="/Data/Product/@product.Avatar">
                                <div class="product__label">
                                    <span>@product.Category?.Name</span>
                                </div>
                            </div>
                            <div class="product__item__text">
                                <h6><a href="/product/@product.PRO_ID">@product.Name</a></h6>
                                <div class="product__item__price">$@product.Price</div>
                            </div>
                        </div>
                    </div>
                }
            }
            </div>
        </div>
    </div>
</section>






       
  

